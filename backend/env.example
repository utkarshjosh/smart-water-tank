# ============================================================================
# Water Tank Backend - Environment Variables
# ============================================================================
# Copy this file to .env and fill in your actual values
# cp env.example .env

# ----------------------------------------------------------------------------
# Server Configuration
# ----------------------------------------------------------------------------
PORT=3000
NODE_ENV=development

# ----------------------------------------------------------------------------
# Database Configuration
# ----------------------------------------------------------------------------
# PostgreSQL connection string
# Format: postgresql://username:password@host:port/database
DATABASE_URL=postgresql://user:password@localhost:5432/water_tank_db

# ----------------------------------------------------------------------------
# Firebase Admin SDK Configuration
# ----------------------------------------------------------------------------
# Get these from Firebase Console > Project Settings > Service Accounts
# Download the service account key JSON file and extract these values
FIREBASE_PROJECT_ID=your-firebase-project-id
FIREBASE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nYOUR_PRIVATE_KEY_HERE\n-----END PRIVATE KEY-----\n"
FIREBASE_CLIENT_EMAIL=firebase-adminsdk-xxxxx@your-project.iam.gserviceaccount.com

# ----------------------------------------------------------------------------
# CORS Configuration
# ----------------------------------------------------------------------------
# Allowed origin for CORS (admin panel URL)
CORS_ORIGIN=http://localhost:3001

# ----------------------------------------------------------------------------
# API Base URL
# ----------------------------------------------------------------------------
# Base URL for the API (used in OTA download URLs)
# In production, use your actual domain: https://api.yourdomain.com
API_BASE_URL=http://localhost:3000

# ----------------------------------------------------------------------------
# File Storage
# ----------------------------------------------------------------------------
# Path where firmware binaries will be stored
# Can be absolute or relative to the backend directory
FIRMWARE_STORAGE_PATH=./storage/firmware

# ----------------------------------------------------------------------------
# Alert Configuration
# ----------------------------------------------------------------------------
# Minutes before a device is considered offline
ALERT_OFFLINE_THRESHOLD_MINUTES=15

# ----------------------------------------------------------------------------
# Leak Detection Configuration
# ----------------------------------------------------------------------------
# Liters per hour threshold for leak detection
# If consumption exceeds this rate, a leak alert is triggered
LEAK_DETECTION_THRESHOLD_L_PER_HOUR=50

# ----------------------------------------------------------------------------
# Admin Seed Configuration (Optional - for initial admin user setup)
# ----------------------------------------------------------------------------
# These variables are used by the seed script to create the first admin user
# Run: npm run seed:dev (or set these variables and run the seed script)
#
# ADMIN_EMAIL=admin@example.com
# ADMIN_NAME=System Administrator
# ADMIN_PASSWORD=securePassword123
# ADMIN_FIREBASE_UID=existing-firebase-uid-here
# ADMIN_ROLE=super_admin
# ADMIN_TENANT_NAME=Default Tenant
#
# Note: Either ADMIN_PASSWORD (to create new Firebase user) or ADMIN_FIREBASE_UID
# (to use existing Firebase user) must be provided, but not both.

# ----------------------------------------------------------------------------
# Optional: JWT/Device Token Secrets (if using custom token generation)
# ----------------------------------------------------------------------------
# JWT_SECRET=your-jwt-secret-key-change-in-production
# DEVICE_TOKEN_SECRET=your-device-token-secret


